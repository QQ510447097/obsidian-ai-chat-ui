/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var b=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var x=(r,t)=>{for(var e in t)b(r,e,{get:t[e],enumerable:!0})},C=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of E(t))!k.call(r,s)&&s!==e&&b(r,s,{get:()=>t[s],enumerable:!(i=B(t,s))||i.enumerable});return r};var L=r=>C(b({},"__esModule",{value:!0}),r);var $={};x($,{default:()=>g});module.exports=L($);var d=require("obsidian"),g=class extends d.Plugin{async onload(){this.registerEvent(this.app.workspace.on("editor-menu",(t,e)=>{t.addItem(i=>{i.setTitle("\u63D2\u5165\u5BF9\u8BDD\u533A\u57DF").setIcon("message-square").onClick(()=>{let s="```chat-ui\nA\uFF1A\u53D1\u8A00\u4EBAA\u540D\u79F0\nB\uFF1A\u53D1\u8A00\u4EBAB\u540D\u79F0\n\uFF08\u5728\u6B64\u8F93\u5165\u5BF9\u8BDD\u5185\u5BB9\uFF09\n```";e.replaceSelection(s),e.setCursor(e.getCursor().line+2,3)})})})),this.registerMarkdownCodeBlockProcessor("chat-ui",(t,e,i)=>{let s=t.split(`
`),l=e.createDiv({cls:"chat-container"}),[h,p,...m]=s,a=h.replace("A\uFF1A","").trim(),f=p.replace("B\uFF1A","").trim(),o=null,c=[],v=n=>n.startsWith(`${a}\uFF1A`)||n.startsWith(`${f}\uFF1A`)||n.trim()==="";m.forEach(n=>{if(v(n)){if(o&&c.length>0&&(this.renderBubble(l,o,a,c.join(`
`)),c=[]),n.startsWith(`${a}\uFF1A`)){o=a;let u=n.slice(a.length+1).trim();u&&c.push(u)}else if(n.startsWith(`${f}\uFF1A`)){o=f;let u=n.slice(f.length+1).trim();u&&c.push(u)}}else o&&c.push(n.trim())}),o&&c.length>0&&this.renderBubble(l,o,a,c.join(`
`))})}renderBubble(t,e,i,s){let l=e===i,h=t.createDiv({cls:`chat-bubble ${l?"left":"right"}`});h.createEl("div",{cls:"role-tag",text:`${e}`});let p=h.createDiv({cls:"content"});this.processContent(s,p)}processContent(t,e){t.split(/（([^）]+)）/g).forEach((s,l)=>{l%2===1?e.createEl("em",{cls:"action",text:s}):s&&s.split(`
`).forEach((p,m)=>{m>0&&e.createEl("br"),e.createDiv({text:p})})})}};
